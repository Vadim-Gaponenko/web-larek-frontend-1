# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
## Данные и типы данных,импользуемые в приложении 

Карточка
```
  interface IProductСard{
        id:string
        description:string
        image:string
        title:string
        category:string
        price:number
    }
```

Интерфейс для модели данных карточек 

```
       interface IItemsData{
        items:IProductСard[];
        prewiew:string|null
    }
```
### Базовый код 
#### 1.Класс Api
Содержит в себе базовую логику отправки запросов. В конструктор передаётся базовый адрес сервера и опциональный объект с заголовками запросов.
- `get` - выполняет GET запрос на переданный в параметрах ендпоинт и возращает промис с объектом,который ответил сервер 
- `post` - принимает объект с данными объект с данными, которые будут переданы в JSON в теле запроса, и отпровляет эти данные на ендпоинт переданный как параметр при вызове метода.По умолчанию выполняется `POST` запрос, но метод запроса может быть переопределен заданием третьего параметра при вызове.

#### 2.Класс EventEmitter
Реализует паттерн «Наблюдатель» и позволяет подписываться на события и уведомлять подписчиков
о наступлении события.
Класс имеет методы `on`  ,  `off` ,  `emit`   — для подписки на событие, отписки от события и уведомления
подписчиков о наступлении события соответственно.
Дополнительно реализованы методы  `onAll` и  `offAll`  — для подписки на все события и сброса всех
подписчиков.
Интересным дополнением является метод  trigger , генерирующий заданное событие с заданными
аргументами. Это позволяет передавать его в качестве обработчика события в другие классы. Эти
классы будут генерировать события, не будучи при этом напрямую зависимыми от
класса  

### Слой данных 

#### Класс CardsData
Класс отвечает за хранение и логику работы с данными карточек товара,полученных с сервера.\
Конструктор класса принимает инстанс брокера событий\
в полях класса хранятся следующие данные 
-_items:IItems[];
-_preview:string|null - id карточки,выбранной для просмотро в модольном окне 
- events: IEveents - экземпляр класса `EventEmitter` для инициации событий при изменении данных 
Так же в классе набор методов для ивзоимодействия с этими данными 
-  `addCard(card:TAddCard):void` - добовляет одну карточку в массив карзины и изминяет  массива 
-  `getCard(cardId:TAddCard):IProductСard`- возращает карточку по её id
а так же сеттеры и гетторы создания  и получения из полей классов 
- ` deleteCard(cardId:TAddCard):void` - удалить карту с массива карзины
### Классы предстовления
Все классы предстовления отвечают за отображения внутри контейнера(DOM-элемент)
передоваемых в них данных 
#### Класс Modal
Реализует модальное окно. Так же предостовляет методы `open` и  `close` для управлениия отображенияммодального окна.Устонавлиивает слушатели, для закрытия модального окна на кнопку крестик 
- constructor(selector:string,events:IEvents)Конструктор принимает селектор,по которому в разметки страницы будет идентифицировано модальное окно и экземпляр класса `EventEmitter` для возможности инициации событий 
-  modal:HTMLEEElement - элемент модального окна
- eveents:IEvents - брокер событий 
#### Класс ModalWithConfim
Расширяет класс Modal. Придназначен для реализации модального  окна подтверждения.При открытии модального окна сохраняяет полученный в параметрах обработчик,который передаётся передаётся при сабмите формы.\
Поля класса:
- checkboxFields  - пполя для выбора варианта(оплаты) 
- submitButton:HTMLButtonEleeement - Кнопка подтверждения
- _form:HTMLFormElement - элемент формы 
- formName:string - значения атрибута  name формы
- handleSumbit: Function - функция, на выполнениия которой запрашивается подтверждение   
методы:
- setValid(isValid: booleon):void - изменяет активность кнопки подтверждения
- open(handleSumbit:Function):void -расширения родительского метода,принимает обработчик,который передаётся при иницииации события подтверждения 
- get form: HTMLElement - геттер для получения формы 
#### класс ModalWithForm
Расширяяет класс Modal.Преднозначен для реализациимодального окна с формой содержащий поля ввода. При  сабмите инициирует событие передавая в него объект  с данными из полей ввода форм.При изменении данных в полях ввода инициирует событие изменения данных.Предоставляет метод дляя ууправления активностью кнопки 
Пол класса:
- submitButton:HTMLButtonElement - кнопка подтвержденияя
- _form:HTMLFormElemeent - элемент формы 
- checkboxFields -элемент чекбокса 
- formName:string - значения атрибута name формы 
- inpunts: NodeListOf<HTMLInputEleent> - колекция всех полей ввода 
методы:
- setValid(isValid: booleon):void - изменяет активность кнопки подтверждения
- setInputValues(data: Record<string,string>):void - принимает  объект с даанными для заполнение полей формы 
- close(): void - расширяет родительский метод дополнителььно при закрытии очищаяполя формы и деактивируя кнопу 
- get form:HTMLElement - геттер  дляя  получения элемента формы 

#### Класс Card 
Отвечает за отображениякарточки,задаваяя в карточке данные названия,изображения,кодичество лайков, наличи лайка текущего пользовате.Класс используется для отображения карточек на страниице сайта. В  конструктор класса передаетс DOM элемент темплейта,что позволят при необхадимости формировать карточки разных вариантов верстки.В класс устанавливаются слушатели на все интерактивные элементы,в результате взаимодействия с которыми пользователь генерирует соответствующие события 
Методы:
setData(cardData:IProductСard)- заполняет отрибуты карточки  данными,а так-же управляет отображением карзины удаления
-deleteCard():void - методдля удаления
-render():HTMMLEleement - метод добовления карточки в массив  модульного окно карзины  
-геттер id возращает уникальный  id карточки

#### Класс CardsContainer
Отвичает  заа отображения блока с карточками наглавной странице.
В конструктор принимаются `container` в котором размещаются карточки 

### Слой комуникации

#### Класс AppApi
Принимает вконструктор экземпляр класса Api и предоставлет методы реализующие взаимодействияя с бэкендом сервиса.

## Взоимодействия компонентов
Код,описывабщий взаимодействия представления и  данных междуусобой находитсяв файле `index.ts`,  выполняющим роль приизентора.\
В `index.ts` сначало создаётся экземпляр всех необходимых классов, а затем настраивается обработка событий

*Списоквсех событий, которые могут генерироваться в системе*\
*События изменения данных  (генерируются классами моделямиданных)*
функционал сайта,согласнаа сценарию  не подразумевает изменения входных данных 

*Событие, возникающиие при взаимодействии пользователи с интерфейсом (генерируются классами,  отвечающимиза предстовление)*
 открытие модального окна с формой редактирования данных пользователя
 выбор карточки для отображения в модальном окне
 выбор карточки для удаления
 изменение данных в форме с данными пользователя
 сохранение данных пользователя в модальном окне
 событие, генерируемое при нажатии "Да" в форме подтверждения
 событие, сообщающие о необходимости валидации формы профеля (всей формы)
